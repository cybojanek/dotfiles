function __hostname_hash_color
    # Compute sum of all ascii characters
    set -l s "(0"
    for x in ( hostname | fold -w1 );
        set s $s + ( printf "%d\n" \'$x )
    end
    set s ( math "$s) % 256" )
    if test $s -ge 9 -a $s -le 15
        set s ( math $s - 8 )
    end
    # Skip some bad colors
    if test $s -eq 0
        set s 1
    else if test $s -ge 16 -a $s -le 19
        set s 20
    else if test $s -ge 231 -a $s -le 239
        set s 240
    end
    echo $s
end

set -U __fish_ansi_to_rgb_r 0 128 0 128 0 128 0 192 128 255 0 255 0 255 0 255 \
                            0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 \
                            0 0 0 0 0 0 0 0 0 0 0 95 95 95 95 95 95 95 95 95 \
                            95 95 95 95 95 95 95 95 95 95 95 95 95 95 95 95 \
                            95 95 95 95 95 95 95 95 95 95 95 135 135 135 135 \
                            135 135 135 135 135 135 135 135 135 135 135 135 \
                            135 135 135 135 135 135 135 135 135 135 135 135 \
                            135 135 135 135 135 135 135 135 175 175 175 175 \
                            175 175 175 175 175 175 175 175 175 175 175 175 \
                            175 175 175 175 175 175 175 175 175 175 175 175 \
                            175 175 175 175 175 175 175 175 215 215 215 215 \
                            215 215 215 215 215 215 215 215 215 215 215 215 \
                            215 215 215 215 215 215 215 215 215 215 215 215 \
                            215 215 215 215 215 215 215 215 255 255 255 255 \
                            255 255 255 255 255 255 255 255 255 255 255 255 \
                            255 255 255 255 255 255 255 255 255 255 255 255 \
                            255 255 255 255 255 255 255 255 8 18 28 38 48 58 \
                            68 78 88 96 102 118 128 138 148 158 168 178 188 \
                            198 208 218 228 238
set -U __fish_ansi_to_rgb_g 0 0 128 128 0 0 128 192 128 0 255 255 0 0 255 255 \
                            0 0 0 0 0 0 95 95 95 95 95 95 135 135 135 135 135 \
                            135 175 175 175 175 175 175 215 215 215 215 215 \
                            215 255 255 255 255 255 255 0 0 0 0 0 0 95 95 95 \
                            95 95 95 135 135 135 135 135 135 175 175 175 175 \
                            175 175 215 215 215 215 215 215 255 255 255 255 \
                            255 255 0 0 0 0 0 0 95 95 95 95 95 95 135 135 135 \
                            135 135 135 175 175 175 175 175 175 215 215 215 \
                            215 215 215 255 255 255 255 255 255 0 0 0 0 0 0 \
                            95 95 95 95 95 95 135 135 135 135 135 135 175 175 \
                            175 175 175 175 215 215 215 215 215 215 255 255 \
                            255 255 255 255 0 0 0 0 0 0 95 95 95 95 95 95 135 \
                            135 135 135 135 135 175 175 175 175 175 175 215 \
                            215 215 215 215 215 255 255 255 255 255 255 0 0 0 \
                            0 0 0 95 95 95 95 95 95 135 135 135 135 135 135 \
                            175 175 175 175 175 175 215 215 215 215 215 215 \
                            255 255 255 255 255 255 8 18 28 38 48 58 68 78 88 \
                            96 102 118 128 138 148 158 168 178 188 198 208 218 \
                            228 238
set -U __fish_ansi_to_rgb_b 0 0 0 0 128 128 128 192 128 0 0 0 255 255 255 255 \
                            0 95 135 175 215 255 0 95 135 175 215 255 0 95 135 \
                            175 215 255 0 95 135 175 215 255 0 95 135 175 215 \
                            255 0 95 135 175 215 255 0 95 135 175 215 255 0 95 \
                            135 175 215 255 0 95 135 175 215 255 0 95 135 175 \
                            215 255 0 95 135 175 215 255 0 95 135 175 215 255 \
                            0 95 135 175 215 255 0 95 135 175 215 255 0 95 135 \
                            175 215 255 0 95 135 175 215 255 0 95 135 175 215 \
                            255 0 95 135 175 215 255 0 95 135 175 215 255 0 95 \
                            135 175 215 255 0 95 135 175 215 255 0 95 135 175 \
                            215 255 0 95 135 175 215 255 0 95 135 175 215 255 \
                            0 95 135 175 215 255 0 95 135 175 215 255 0 95 135 \
                            175 215 255 0 95 135 175 215 255 0 95 135 175 215 \
                            255 0 95 135 175 215 255 0 95 135 175 215 255 0 95 \
                            135 175 215 255 0 95 135 175 215 255 0 95 135 175 \
                            215 255 0 95 135 175 215 255 0 95 135 175 215 255 \
                            8 18 28 38 48 58 68 78 88 96 102 118 128 138 148 \
                            158 168 178 188 198 208 218 228 238
